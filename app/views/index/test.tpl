<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>TimeMsg.com</title>
	<link rel="stylesheet" type="text/css" href="fixed.css" media="screen" />

</head>
<body class="dhe-body">
<div id="canvas" style="overflow:hidden;position:absolute;width:1000px;height:10000px;"></div>

<div id="center-wrapper">
	<div class="dhe-example-section" id="ex-1-4">
		<div class="dhe-example-section-content">

			<!-- BEGIN: XHTML for example 1.4 -->
			<!--<div style="width:500px; background:#039; height:2px; line-height:2px; position:absolute; top:150px; left:150px; z-index:1"></div>-->

			<div id="example-1-4">
				<div id="containment" style="background-color:#fff;"> <br/><br/><br/><br/><br/><br/>
					<div class="column left first" id="column1">
						<ul class="sortable-list">
							<li class="sortable-item" id="A1" style="height:100px;"><div class="padT5"><a href="#">A1</a></div></li>
							<li class="sortable-item" id="A2" style="height:120px;"><div class="padT5">A2</div></li>
							<li class="sortable-item" id="A3" style="height:180px;"><div class="padT5">A3</div></li>
							<li class="sortable-item" id="A4" style="height:140px;"><div class="padT5">A4</div></li>
							<li class="sortable-item" id="A5" style="height:150px;"><div class="padT5">A5</div></li>
							<li class="sortable-item" id="A6" style="height:150px;"><div class="padT5">A6</div></li>
							<li class="sortable-item" id="A7" style="height:150px;"><div class="padT5">A7</div></li>
							<li class="sortable-item" id="A8" style="height:150px;"><div class="padT5">A8</div></li>
							<li class="sortable-item" id="A9" style="height:150px;"><div class="padT5">A9</div></li>
							<li class="sortable-item" id="A10" style="height:150px;"><div class="padT5">A10</div></li>
							<li class="sortable-item" id="A11" style="height:150px;"><div class="padT5">A11</div></li>
							<li class="sortable-item" id="A12" style="height:150px;"><div class="padT5">A12</div></li>
							<li class="sortable-item" id="A13" style="height:150px;"><div class="padT5">A13</div></li>
							<li class="sortable-item" id="A14" style="height:150px;"><div class="padT5">A14</div></li>
							<li class="sortable-item" id="A15" style="height:150px;"><div class="padT5">A15</div></li>
							<li class="sortable-item" id="A16" style="height:150px;"><div class="padT5">A16</div></li>
							<li class="sortable-item" id="A17" style="height:150px;"><div class="padT5">A17</div></li>
							<li class="sortable-item" id="A18" style="height:150px;"><div class="padT5">A18</div></li>
							<li class="sortable-item" id="A19" style="height:150px;"><div class="padT5">A19</div></li>
							<li class="sortable-item" id="A20" style="height:150px;"><div class="padT5">A20</div></li>
						</ul>
					</div>
					<div class="column left"  id="column2">
						<ul class="sortable-list">
							<li class="sortable-item" id="B1" style="height:150px;"><div class="padT5">B1</div></li>
							<li class="sortable-item" id="B2" style="height:120px;"><div class="padT5">B2</div></li>
							<li class="sortable-item" id="B3" style="height:80px;"><div class="padT5">B3</div></li>
							<li class="sortable-item" id="B4" style="height:140px;"><div class="padT5">B4</div></li>
							<li class="sortable-item" id="B5" style="height:150px;"><div class="padT5">B5</div></li>
							<li class="sortable-item" id="B6" style="height:120px;"><div class="padT5">B6</div></li>
							<li class="sortable-item" id="B7" style="height:150px;"><div class="padT5">B7</div></li>
							<li class="sortable-item" id="B8" style="height:150px;"><div class="padT5">B8</div></li>
							<li class="sortable-item" id="B9" style="height:150px;"><div class="padT5">B9</div></li>
							<li class="sortable-item" id="B10" style="height:150px;"><div class="padT5">B10</div></li>
							<li class="sortable-item" id="B11" style="height:180px;"><div class="padT5">B11</div></li>
							<li class="sortable-item" id="B12" style="height:150px;"><div class="padT5">B12</div></li>
							<li class="sortable-item" id="B13" style="height:150px;"><div class="padT5">B13</div></li>
							<li class="sortable-item" id="B14" style="height:150px;"><div class="padT5">B14</div></li>
							<li class="sortable-item" id="B15" style="height:150px;"><div class="padT5">B15</div></li>
							<li class="sortable-item" id="B16" style="height:200px;"><div class="padT5">B16</div></li>
							<li class="sortable-item" id="B17" style="height:150px;"><div class="padT5">B17</div></li>
							<li class="sortable-item" id="B18" style="height:150px;"><div class="padT5">B18</div></li>
							<li class="sortable-item" id="B19" style="height:150px;"><div class="padT5">B19</div></li>
							<li class="sortable-item" id="B20" style="height:150px;"><div class="padT5">B20</div></li>
						</ul>
					</div>
					<div class="column left" id="column3">
						<ul class="sortable-list">
							<li class="sortable-item" id="C1" style="height:170px;"><div class="padT5">C1</div></li>
							<li class="sortable-item" id="C2" style="height:120px;"><div class="padT5">C2</div></li>
							<li class="sortable-item" id="C3" style="height:80px;"><div class="padT5">C3</div></li>
							<li class="sortable-item" id="C4" style="height:140px;"><div class="padT5">C4</div></li>
							<li class="sortable-item" id="C5" style="height:130px;"><div class="padT5">C5</div></li>
							<li class="sortable-item" id="C6" style="height:150px;"><div class="padT5">C6</div></li>
							<li class="sortable-item" id="C7" style="height:150px;"><div class="padT5">C7</div></li>
							<li class="sortable-item" id="C8" style="height:150px;"><div class="padT5">C8</div></li>
							<li class="sortable-item" id="C9" style="height:150px;"><div class="padT5">C9</div></li>
							<li class="sortable-item" id="C10" style="height:150px;"><div class="padT5">C10</div></li>
							<li class="sortable-item" id="C11" style="height:150px;"><div class="padT5">C11</div></li>
							<li class="sortable-item" id="C12" style="height:150px;"><div class="padT5">C12</div></li>
							<li class="sortable-item" id="C13" style="height:150px;"><div class="padT5">C13</div></li>
							<li class="sortable-item" id="C14" style="height:150px;"><div class="padT5">C14</div></li>
							<li class="sortable-item" id="C15" style="height:120px;"><div class="padT5">C15</div></li>
							<li class="sortable-item" id="C16" style="height:150px;"><div class="padT5">C16</div></li>
							<li class="sortable-item" id="C17" style="height:100px;"><div class="padT5">C17</div></li>
							<li class="sortable-item" id="C18" style="height:150px;"><div class="padT5">C18</div></li>
							<li class="sortable-item" id="C19" style="height:150px;"><div class="padT5">C19</div></li>
							<li class="sortable-item" id="C20" style="height:200px;"><div class="padT5">C20</div></li>
						</ul>
					</div>
					<div class="column left" id="column4">
						<ul class="sortable-list">
							<li class="sortable-item" id="D1" style="height:140px;"><div class="padT5">D1</div></li>
							<li class="sortable-item" id="D2" style="height:120px;"><div class="padT5">D2</div></li>
							<li class="sortable-item" id="D3" style="height:80px;"><div class="padT5">D3</div></li>
							<li class="sortable-item" id="D4" style="height:140px;"><div class="padT5">D4</div></li>
							<li class="sortable-item" id="D5" style="height:160px;"><div class="padT5">D5</div></li>
							<li class="sortable-item" id="D6" style="height:150px;"><div class="padT5">D6</div></li>
							<li class="sortable-item" id="D7" style="height:150px;"><div class="padT5">D7</div></li>
							<li class="sortable-item" id="D8" style="height:150px;"><div class="padT5">D8</div></li>
							<li class="sortable-item" id="D9" style="height:150px;"><div class="padT5">D9</div></li>
							<li class="sortable-item" id="D10" style="height:220px;"><div class="padT5">D10</div></li>
							<li class="sortable-item" id="D11" style="height:150px;"><div class="padT5">D11</div></li>
							<li class="sortable-item" id="D12" style="height:150px;"><div class="padT5">D12</div></li>
							<li class="sortable-item" id="D13" style="height:150px;"><div class="padT5">D13</div></li>
							<li class="sortable-item" id="D14" style="height:110px;"><div class="padT5">D14</div></li>
							<li class="sortable-item" id="D15" style="height:150px;"><div class="padT5">D15</div></li>
							<li class="sortable-item" id="D16" style="height:140px;"><div class="padT5">D16</div></li>
							<li class="sortable-item" id="D17" style="height:150px;"><div class="padT5">D17</div></li>
							<li class="sortable-item" id="D18" style="height:150px;"><div class="padT5">D18</div></li>
							<li class="sortable-item" id="D19" style="height:100px;"><div class="padT5">D19</div></li>
							<li class="sortable-item" id="D20" style="height:120px;"><div class="padT5">D20</div></li>
						</ul>
					</div>
					<div class="clearer">&nbsp;</div>
				</div>
			</div>
			<!-- END: XHTML for example 1.4 -->

		</div>
	</div>
</div>
{literal}
<!-- Example JavaScript files -->
<script type="text/javascript" src="jquery-1.4.2.min.js"></script>
<script type="text/javascript" src="jquery-ui-1.8.custom.min.js"></script>
<script type="text/JavaScript" src="jsDraw2D.js"></script>

<!-- Example jQuery code (JavaScript)  -->
<script type="text/javascript">

$(document).ready(function(){
	// Example 1.4: Sortable and connectable lists (within containment)
	/*
	$('#example-1-4 .sortable-list').sortable({
		connectWith: '#example-1-4 .sortable-list',
		containment: '#containment'
	});
	*/

});

$(function(){
	$('.sortable-item').each(function(){
		$(this).click(function() {
			updateWidgetData();
		})
		.end()
	});
});
var t = 0;
function updateWidgetData(){
	var items=[];
	$('.column').each(function(){
		var columnId=$(this).attr('id');
		$('.sortable-item', this).each(function(i){
			var id = $(this).attr('id');
			updateLine();
		});
	});
}

var colours = ['purple', 'red', 'orange', 'yellow', 'lime', 'green', 'blue', 'navy', 'black'];
var canvasDiv=document.getElementById("canvas");
var gr=new jsGraphics(canvasDiv);

function drawCurve(points, idA, idB)
{
	var col = new jsColor(colours[random(1, 8)]);
	var pen = new jsPen(col, 2);
	gr.drawCurve(pen, points, 0, false, idA, idB);
	for (i = 0; i < points.length; i++) {
		var col = new jsColor(colours[0]);
		//gr.fillCircle(col, points[i], 4);
	}	
}

function random(min, max) {
	var value = Math.floor(Math.random()*max);
	if (value < min) {
		value = min;
	}
	return Math.floor(value);
}

function xyh(id) {	
	var l = Math.floor($('#'+id).offset().left);
	var t = Math.floor($('#'+id).offset().top - Math.floor($('#containment').offset().top));
	var h = Math.floor($('#'+id).height());
	return {x:l, y:t, h:h};
}
/*
connect('A1', 'B3');
connect('A1', 'B2');
connect('B2', 'C9');
connect('A1', 'A15');
connect('A1', 'B12');
connect('A2', 'B2', 'C14');
connect('A3', 'B3', 'C16');
connect('A5', 'B5', 'C5', 'D2');
connect('A5', 'B5', 'C5', 'D5');
connect('A5', 'B5', 'C5', 'D10');
connect('A4', 'B4', 'C4');
connect('A6', 'B6', 'C6');
*/
connect('A5', 'B5', 'C1');
connect('A5', 'B5', 'C2');
connect('A5', 'B5', 'C3');
connect('A5', 'B5', 'C4');
connect('A5', 'B5', 'C5');
connect('A5', 'B5', 'C6');
connect('A5', 'B5', 'C7');
connect('A5', 'B5', 'C8');
connect('A5', 'B5', 'C9');
connect('A5', 'B5', 'C10');
connect('A5', 'B5', 'C11');

connect('A3', 'B1');
//connect('A3', 'B5');
//connect('A3', 'B10');

function connect(id1, id2, id3, id4) {
	var points = new Array();
	var DX = 4;	
	var w  = 160;
	var W2 = 80;
	var DC = 100;
	var r  = random(35, 65);
	var P1 = xyh(id1);
	var P2 = xyh(id2);	

	if (id3 == undefined  && id4== undefined ) {
		if (P1.x == P2.x) {
			var x1 = P1.x + w - DX;
			var y1 = random(P1.y, P1.y + P1.h);
			points.push(new jsPoint(x1, y1));
	
			var x2 = P2.x + w;
			var y2 = random(P2.y, P2.y + P2.h);
			for (var i = 100; i <= y2 - y1; i+=100) {
				points.push(new jsPoint(x2 + r, y1 + i));
			}
			points.push(new jsPoint(x2 - DX, y2));
			drawCurve(points, id1, id2);
			return;
		} else {			
			var x1 = P1.x + w - DX;					
			var x2 = P2.x;
			var y2 = random(P2.y, P2.y + P2.h);			
			if (P1.y < P2.y) {
				var y1 = random(P1.y + Math.floor(P1.h/2), P1.y + P1.h);	
				points.push(new jsPoint(x1, y1));
				for (var i = 100; i <= y2 - y1; i+=100) {
					points.push(new jsPoint(x2 - r, y1 + i));
				}
			} else {
				var y1 = random(P1.y, P1.y + Math.floor(P1.h/2));
				points.push(new jsPoint(x1, y1));
				for (var i = 100; i <= y1 - y2; i+=100) {
					points.push(new jsPoint(x2 - r, y1 - i));
				} 
			}
			points.push(new jsPoint(x2 - DX - 4, y2));
			drawCurve(points, id1, id2);
			return;
		}		
	} else if (id4 == undefined) {		
		var P3 = xyh(id3);
		if (P1.y >= P3.y) {
			var x1 = P1.x + w - DX;
			var y1 = random(P1.y, P1.y + Math.floor(P1.h/2));
			points.push(new jsPoint(x1, y1));
			
			var x2 = P2.x;
			var y2 = P2.y - r;
			var x3 = P3.x-DX;
			var y3 = random(P3.y + Math.floor(P3.h/2), P3.y + P3.h);
			points.push(new jsPoint(x2 - r, y2 + r));
			points.push(new jsPoint(x2, y2));
			points.push(new jsPoint(x2 + w, y2));
			//points.push(new jsPoint(x2 + w + r, y2 - r));
			if (y2 < y3) {
				points.push(new jsPoint(x2 + w + r, y2 + r));
			} else {
				points.push(new jsPoint(x2 + w + r, y2 - r));
			}
			for (var i = 100; i <= y2 - r - y3; i+=100) {
				if (y2 - r - i > y3) {
					points.push(new jsPoint(x3 - r, y2 - r - i));
				}
			}
			points.push(new jsPoint(x3 - DX, y3));
			drawCurve(points, id1, id3);
			return;
		} else {
			var x1 = P1.x + w - DX;
			var y1 = random(P1.y + Math.floor(P1.h/2), P1.y + P1.h);
			points.push(new jsPoint(x1, y1));
			
			var x2 = P2.x;
			var y2 = P2.y + P2.h + r;
			var x3 = P3.x-DX;
			var y3 = random(P3.y, P3.y + Math.floor(P3.h/2));
			points.push(new jsPoint(x2 - r, y2 - r));
			points.push(new jsPoint(x2, y2));
			points.push(new jsPoint(x2 + w, y2));
			//points.push(new jsPoint(x2 + w + r, y2 + r));
			if (y2 < y3) {
				points.push(new jsPoint(x2 + w + r, y2 + r));
			} else {
				points.push(new jsPoint(x2 + w + r, y2 - r));
			}
			for (var i = 100; i <= y3 - y2 + r; i+=100) {
				if (y2 + r + i < y3) {
					points.push(new jsPoint(x3 - r, y2 + r + i));
				}
			}
			points.push(new jsPoint(x3 - DX, y3));
			drawCurve(points, id1, id3);
			return;
		}
	} else {		
		var P3 = xyh(id3);
		var P4 = xyh(id4);
		if (P1.y >= P4.y) {
			var x1 = P1.x + w - DX;
			var y1 = random(P1.y, P1.y + Math.floor(P1.h/2));
			points.push(new jsPoint(x1, y1));
			
			var x2 = P2.x;
			var y2 = P2.y - r;
			var x3 = P3.x;
			var y3 = P3.y - r;
			var x4 = P4.x-DX;
			var y4 = random(P4.y + Math.floor(P4.h/2), P4.y + P4.h);
			points.push(new jsPoint(x2 - r, y2 + r));
			points.push(new jsPoint(x2, y2));
			points.push(new jsPoint(x2 + w, y2));
			points.push(new jsPoint(x3, y3));
			points.push(new jsPoint(x3 + w, y3));
			if (y3 < y4) {
				points.push(new jsPoint(x3 + w + r, y3 + r));
			} else {
				points.push(new jsPoint(x3 + w + r, y3 - r));
			}
			for (var i = 100; i <= y3 - r - y4; i+=100) {
				if (y3 - r - i - 50 > y4) {
					points.push(new jsPoint(x4 - r, y3 - r - i));
				}
			}
			points.push(new jsPoint(x4 - DX, y4));
			drawCurve(points, id1, id4);
			return;
		} else {
			var x1 = P1.x + w - DX;
			var y1 = random(P1.y + Math.floor(P1.h/2), P1.y + P1.h);
			points.push(new jsPoint(x1, y1));
			
			var x2 = P2.x;
			var y2 = P2.y + P2.h + r;
			var x3 = P3.x;
			var y3 = P3.y + P3.h + r;
			var x4 = P4.x-DX;
			var y4 = random(P4.y, P4.y + Math.floor(P4.h/2));
			points.push(new jsPoint(x2 - r, y2 - r));
			points.push(new jsPoint(x2, y2));
			points.push(new jsPoint(x2 + w, y2));
			points.push(new jsPoint(x3, y3));
			points.push(new jsPoint(x3 + w, y3));
			//points.push(new jsPoint(x3 + w + r, y3 + r));
			if (y3 < y4) {
				points.push(new jsPoint(x3 + w + r, y3 + r));
			} else {
				points.push(new jsPoint(x3 + w + r, y3 - r));
			}
			for (var i = 100; i <= y4 - y3 + r; i+=100) {
				if (y3 + r + i + 50 < y4) {
					points.push(new jsPoint(x4 - r, y3 + r + i));
				}
			}
			points.push(new jsPoint(x4 - DX, y4));
			drawCurve(points, id1, id4);
			return;
		}
	}
}

function clearCanvas()
{
	gr.clear();
}

function highlight(id) {
	alert(id);
}
</script>
{/literal}
</body>
</html>